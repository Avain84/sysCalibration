import{a as l,o as s,k as S,h as m,l as k,m as $,b as r,n as c,e as h,j as C,w as y,t as f,p as B,F as g,q as w,g as O,d as _,u as b,v as x,x as L,R as N}from"./index-CmU7BPTQ.js";import{i as R,_ as V,a as P,u as D}from"./Button-BR6o4zY7.js";import{_ as E}from"./logo-lg-BqCaA2gN.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";function z(i={}){return R({url:"/user/getProfile",method:"post",token:!0,data:i})}const M={},T={width:"10",height:"10",viewBox:"0 0 10 10",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};function F(i,n){return s(),l("svg",T,n[0]||(n[0]=[S('<g clip-path="url(#clip0_150_3558)"><rect width="9.6" height="9.6" transform="translate(0.400024 0.199951)" fill="currentColor" fill-opacity="0.01"></rect><path d="M4.9291 7.16172L1.9316 3.73547C1.57785 3.33234 1.86535 2.69922 2.40223 2.69922H8.39723C8.51738 2.69912 8.63501 2.73365 8.73605 2.79868C8.83708 2.86372 8.91722 2.95649 8.96688 3.0659C9.01654 3.17531 9.03361 3.29672 9.01605 3.41558C8.99849 3.53444 8.94703 3.64572 8.86785 3.73609L5.87035 7.16109C5.81169 7.22822 5.73934 7.28203 5.65817 7.31889C5.577 7.35576 5.48888 7.37483 5.39973 7.37483C5.31057 7.37483 5.22246 7.35576 5.14128 7.31889C5.06011 7.28203 4.98776 7.22822 4.9291 7.16109V7.16172Z"></path></g><defs><clipPath id="clip0_150_3558"><rect width="9.6" height="9.6" fill="currentColor" transform="translate(0.400024 0.199951)"></rect></clipPath></defs>',2)]))}const U=j(M,[["render",F]]),q={class:"fixed top-0 left-0 w-full h-15 shadow-md px-4 py-1.5 flex justify-center items-center"},A={key:0,class:"absolute w-32 right-1/6 mt-2 bg-white shadow-md rounded-md border border-neutral-80 overflow-hidden"},W={__name:"Navbar",props:{isSidebarOpen:Boolean},emits:["toggleSidebar"],setup(i){const n=m({role:"company",username:"使用者名稱"}),t=m(!1),o=m(!1),d=m(null),p=()=>{o.value=!o.value},u=e=>{d.value&&!d.value.contains(e.target)&&(o.value=!1)},v=async()=>{try{const e=await z();n.value=e.payload,t.value=e.payload.role==="employee"}catch(e){console.log(e)}};return k(()=>{v(),document.addEventListener("click",u)}),$(()=>{document.removeEventListener("click",u)}),(e,a)=>(s(),l("header",q,[r("button",{onClick:a[0]||(a[0]=J=>e.$emit("toggleSidebar")),class:"cursor-pointer mr-4 xl:hidden relative w-8 h-8 flex flex-col justify-between items-center p-1 group"},[r("span",{class:c(["block rounded-full h-1 w-full transform transition duration-300",[t.value?"bg-primary-40 group-hover:bg-primary-60":"bg-tertiary-40 group-hover:bg-tertiary-60",{"rotate-45 translate-y-2.5":i.isSidebarOpen}]])},null,2),r("span",{class:c(["block rounded-full h-1 w-full transition duration-300",[t.value?"bg-primary-40 group-hover:bg-primary-60":"bg-tertiary-40 group-hover:bg-tertiary-60",{"opacity-0":i.isSidebarOpen}]])},null,2),r("span",{class:c(["block rounded-full h-1 w-full transform transition duration-300",[t.value?"bg-primary-40 group-hover:bg-primary-60":"bg-tertiary-40 group-hover:bg-tertiary-60",{"-rotate-45 -translate-y-2.5":i.isSidebarOpen}]])},null,2)]),a[3]||(a[3]=r("h1",{class:"mr-auto text-h4B lg:text-h3B text-primary-30"},[r("a",{href:"/#/system",class:"flex justify-center items-center gap-4"},[r("img",{src:E,alt:"system logo",class:"w-10 lg:w-12 aspect-square"}),r("span",{class:"hidden sm:block"},"設備校驗系統平台")])],-1)),r("div",{ref_key:"userDropdownRef",ref:d,class:"relative",onClick:p},[h(V,{type:"button",size:"sm",rounded:"full",role:n.value.role},{default:y(()=>[r("span",null,f(n.value.username),1),h(U)]),_:1},8,["role"]),o.value?(s(),l("ul",A,[r("li",{class:c(["px-4 py-2 hover:text-white",[t.value?"hover:bg-primary-30":"hover:bg-tertiary-30"]])},a[1]||(a[1]=[r("a",{href:"#"},"個人資料",-1)]),2),r("li",{class:c(["px-4 py-2 hover:bg-primary-30 hover:text-white",[t.value?"hover:bg-primary-30":"hover:bg-tertiary-30"]])},a[2]||(a[2]=[r("a",{href:"#"},"登出",-1)]),2)])):C("",!0)],512)]))}},H={class:"p-4"},Z=["onClick"],G={__name:"Sidebar",props:{isSidebarOpen:Boolean},setup(i){const n=B(),t=[{name:"儀錶板",path:"/dashboard"},{name:"校驗商管理",path:"/company-management"},{name:"系統設定",path:"",children:[{name:"權限設定",path:"/system/permissions"},{name:"偏好設定",path:"/system/preferences"}]}],o=m(""),d=u=>{o.value===u?o.value="":o.value=u},p=u=>o.value===u;return(u,v)=>(s(),l("aside",{class:c(["top-15 left-0 w-full xl:w-1/4 min-h-full shadow-lg",i.isSidebarOpen?"fixed":"hidden"])},[r("ul",H,[(s(),l(g,null,w(t,e=>r("li",{key:e.name,class:"px-6 py-2"},[e.children&&e.children.length>0?(s(),l(g,{key:0},[r("button",{class:"text-lg w-full text-left pl-4 border-l-4 border-transparent hover:border-primary-60",onClick:a=>d(e.name)},f(e.name),9,Z),p(e.name)?(s(),l("ul",{key:0,class:c(["",p(e.name)?"block mt-2 px-3 py-3 border-t border-secondary-90":"hidden"])},[(s(!0),l(g,null,w(e.children,a=>(s(),l("li",{key:a.name,class:"px-3"},[h(b(x),{to:a.path,class:"block text-lg px-3 py-1 rounded-lg border border-transparent hover:border-secondary-90"},{default:y(()=>[_(f(a.name),1)]),_:2},1032,["to"])]))),128))],2)):C("",!0)],64)):(s(),O(b(x),{key:1,to:e.path,class:c(["text-lg w-full pl-4 border-l-4 border-transparent hover:border-primary-60",{"text-primary-60 !border-primary-60 font-bold":b(n).path===e.path}])},{default:y(()=>[_(f(e.name),1)]),_:2},1032,["to","class"]))])),64))])],2))}},I={class:"bg-primary-50 mt-15 xl:w-3/4 xl:ml-auto"},ee={__name:"SidebarWithNavbar",setup(i){const{goToRoute:n}=D(),t=m(!1),o=()=>{t.value=!t.value},d=()=>{t.value=window.innerWidth>=1280};return k(()=>{L("token")||(P().error("登入過期","請重新登入"),n("companyLogin")),d(),window.addEventListener("resize",d)}),(p,u)=>(s(),l(g,null,[h(W,{"is-sidebar-open":t.value,onToggleSidebar:o},null,8,["is-sidebar-open"]),h(G,{"is-sidebar-open":t.value},null,8,["is-sidebar-open"]),r("main",I,[h(b(N))])],64))}};export{ee as default};
